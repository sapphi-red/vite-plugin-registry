{
  "type": "object",
  "properties": {
    "schemaVersion": {
      "const": 1,
      "description": "Schema version for forward compatibility"
    },
    "vite": {
      "$ref": "#/$defs/ToolCompatibilitySchema"
    },
    "rollup": {
      "$ref": "#/$defs/ToolCompatibilitySchema"
    },
    "rolldown": {
      "$ref": "#/$defs/ToolCompatibilitySchema"
    }
  },
  "required": ["schemaVersion"],
  "description": "Schema for the compatiblePackages field in package.json, declaring plugin compatibility with bundlers",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$defs": {
    "ToolCompatibilitySchema": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "compatible"
            },
            "versions": {
              "type": "string",
              "description": "Semver range of compatible versions"
            },
            "note": {
              "type": "string",
              "description": "Optional note providing additional context about compatibility"
            }
          },
          "required": ["type", "versions"]
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "incompatible"
            },
            "reason": {
              "type": "string",
              "description": "Human-readable explanation of why the plugin is incompatible"
            }
          },
          "required": ["type", "reason"]
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "unknown"
            }
          },
          "required": ["type"]
        }
      ]
    }
  },
  "$id": "https://raw.githubusercontent.com/vitejs/vite-plugin-registry/refs/heads/main/data/schema/compatible-packages.schema.json",
  "title": "Compatible Packages Schema"
}
